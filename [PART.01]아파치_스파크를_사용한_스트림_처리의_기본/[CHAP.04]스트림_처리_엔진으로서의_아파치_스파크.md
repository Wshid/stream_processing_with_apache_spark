# [CHAP.04] 스트림 처리 엔진으로서의 아파치 스파크

## 4.4. 처리량 지향 처리
- 스트림 처리에서 뛰어난 점
  - 처리량 지향의 데이터 분석
- 택시나 자동차를 타면 기차보다 빠르게 도착을 할 수 있으나,
  - 기차의 경우, 더 많은 승객을 도착하도록 보장함
- **기차**는 일부 승객이 출발할 때까지 기다려야 하는 비용으로
  - 동일한 궤도에 대해 더 높은 처리량을 보장
- 스파크 코어 엔진은 **분산 배치 처리**에 최적화
  - 시간 단위당 대량의 데이터를 처리할 수 있도록 보장
- 스파크는 **한 번에 많은 요소**를 처리하도록 하여 **분산 작업 스케줄링**의 오버헤드를 상쇄하며,
  - 이 장 앞부분에서 보았듯이 **인메모리 기법, 쿼리 최적화, 캐싱 및 코드 생성**까지 활용하여
  - 데이터 셋의 **변환 프로세스**를 가속화한다
- 스파크를 사용할 때 중요한 제약 조건
  - 처리된 데이터를 **수신하는 다운스트림 시스템**도 **스트리밍 프로세스**부터
  - 제공하는 전체 출력을 수용할 수 있어야 한다
  - 그렇지 않다면 갑작스런 **부하 피크**에 직면에 직면했을 때
    - 종속 장애를 일으킬 수 있는 **어플리케이션 병목 현상**을 발생시킬 위험이 있음

## 4.5. 스파크의 폴리글랏 API
- 스파크는 **스칼라 전용 프로젝트**로 처음 코딩
- `java, python, R` 언어를 사용해서 접속할 수 있는 **폴리글랏 프레임워크**가 됨
- 개발 언어는 여전히 스칼라

## 4.6. 데이터 분석의 빠른 구현
- 데이터 분석 파이프라인 개발시의 스파크 장점
  - 스칼라에서 간결하고 높은 수준의 API
  - 자바와 파이썬 호환되는 API를 제공하는 것 이상
- 개발 과정 전반에 걸쳐, 스파크의 **단순한 모델** 제공
- 머신러닝과 많은 분야를 위한 `java lib ecosystem`에 접근할 수 있음
  - `CoreNLP`를 사용하여 `tokenizer`를 사용 가능
- 전반적으로
  - **스트리밍 데이터 파이프 라인 솔루션**을 빠르게 프로토타입화 하여
  - 파이프라인 개발의 모든 단계에서, 적절한 구성요소 선택할 수 있을 만큼
    - 첫 번째 결과를 빠르게 얻음
- **내결함성 모델**의 이점을 제공
  - 결함이 있는 기계가, 스트리밍 어플리케이션을 중단하지 않을 것이라는 확신
  - spark job의 재시작을 보면
    - 무중단 스트리밍 시의 복원력이 높음을 느낄 수 있음
- 스파크는
  - **지연 시간**에서 `trade-off`를 이루면서도
  - 민첩성을 갖춘 데이터 분석 파이프라인을 구축하기 위해 **최적화 하는 프레임 워크**

## 4.7. 스파크에 대해 더 알아보기
- 러닝 스파크
- 스파크 완벽 가이드
- 공식 문서

## 4.8 요약
- 주요 성능 향상, 인메모리 연산을 통해 어떻게 모델 확장하는지
- 새로운 고차 기능을 갖춘 API
- 하둡에 비해 **더 작은 공간에 초점**
- 스트리밍 API, 마이크로 배칭 접근법의 의미, 어떤 용도에 적합한지
- 스트림 처리 고려
- 안정적이고 내결함성 있는 배포와 함께
  - 민첩성을 갖춘 파이프라인을 구축하는 것 -> 최선의 사용 사례