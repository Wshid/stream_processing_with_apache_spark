# [CHAP.03] 스트리밍 아키텍처
- 클러스터가 몇 개 팀간의 공유 리소스라면,
  - 클러스터의 가치가 지속적으로 하락하므로,
  - **multitenancy 문제**를 잘 다루어야 함
- 두 팀의 요구가 다를 때, 
  - 각 팀에 공정하고, 안전한 클러스터 **리소스 접근**을 제공해야 함
  - 동시에 컴퓨팅 리소스가 시간에 따라 **잘 활용되도록 하는 것**이 중요
- **모듈성**을 통해 이러한 이질성을 해결하도록 함
- 여러 **기능 블록**이 데이터 플랫폼의 상호 교환 가능한 부분으로 등장
  - 데이터베이스 스토리지를 **기능 블록**이라고 할 때,
  - 일반적으로 `PostgreSQL`이나 `MySQL`과 같은 관계형 db지만
  - **스트리밍 어플리케이션**이 매우 높은 처리량으로 데이터 쓰기를 해야할 경우
    - **apache cassandra**와 같은 확장 가능한 컬럼 지향 데이터베이스가 더 나은 선택일 것
- 스트리밍 데이터 플랫폼의 아키텍처를 구성하는 여러 부분
  - 완전한 솔루션에 필요한 다읗 요소들과, 관련된 처리 엔진의 위치 파악
- `Lambda`와 `Kappa Architecture`

## 3.1. 데이터 플랫폼의 구성 요소
- 스키마 하단의 `bare-metal` 수준에서 비즈니스 요구 사항이 요구하는 실제 데이터 처리로 넘어가면, 다음과 같은 내용 존재

### 하드웨어 수준
- `On-promise 하드웨어 설치`, 데이터 센서, OS가 설치된 클라우드 솔루션
  - `On-promise` : 서버를 클라우드 환경이 아닌 **자체 설비**로 보유하는 것

### 지속성 수준
- 인프라 위에 기계가 **계산 결과**뿐만 아니라, **입력**도 저장하기 위해
  - **지속성 솔루션**에 **공유 인터페이스**를 제공하는 것이 예상 됨
- 이 단계에서 많은 **분산 스토리지 솔루션** 중 `HDFS`와 같은 **분산 스토리지 솔루션**을 찾을 수 있음
- 클라우드에서는 이 지속성 계층이 `Amazon S3`나 `Google Cloud Storage`와 같은 전용 서비스로 제공

### 리소스 매니저
- 클러스터에서 **실행할 작업을 제출**하기 위한 **단일 협상 지점**을 제공
- `yarn`, `mesos`와 같은 `Resource Manager`의 과제고,
- `c8s` 같은 **클라우드 네이티브**시대의 보다 **진화된 스케줄러**의 과제

### 실행 엔진
- 실제 계산을 수행하는 **실행 엔진**
- 프로그래머의 **입력**와 **인터페이스**를 유지하고
  - 데이터 **조작을 설명**하는 것
- `apache spark, flink` 및 `Map-Reduce`등이 존재

### 데이터 수집 구성 요소
- 실행 엔진에 직접 연결될 수 있는 **데이터 수집 서버**
- 분산 파일 시스템에서 데이터를 읽는 오래된 관습을 보완하거나,
  - **실시간**으로 조회할 수 있는 다른 **데이터 소스**로 대체
- `apache kafka`와 같은 **메세징 시스템**이나 **로그 처리 엔진의 영역**이 이 수준에 해당

### 처리된 데이터 싱크
- 실행 엔진의 **출력** 쪽에서 다른 분석 시스템(**ETL**(Extract, Transform, Load) 작업을 수행하는 실행엔진의 경우)
- `NoSQL` 데이터베이스 또는 기타 다른 서비스일 수 있는 **고급 데이터 싱크**를 찾을 수 있음

### 시각화 계층
- 기존의 **정적 보고서**에서 벗어나
  - 종종 일부 **웹 기반 기술**을 사용하여
  - 보다 **실시간 시각 인터페이스**로 변화함

### 정리
- 이 아키텍쳐에서 **스파크**는 **컴퓨팅 엔진**으로서
  - **데이터 처리 기능**을 제공하는데 초점을 맞추고
  - 그 그림의 **다른 블록**과의 기능 인터페이스를 가질 필요성이 있음
- 특히 `RM`으로서 `yarn, mesos, k8s`와 인터페이스 하고, 많은 데이터 소스에 **커넥터**를 제공하는 동시에
- 새로운 데이터 소스는 쉽게 확장 가능한 `API`를 통해 추가하고,
  - **출력 데이터 싱크**와 통합하여 **업스트림 시스템에 결과를 제시**할 수 있는 **클러스터 추상화 레이어**를 구현한다